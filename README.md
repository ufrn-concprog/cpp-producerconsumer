# The producer-consumer problem: A solution using semaphores and condition variables in C++

## About 
This project implements a solution to the well-known [producer-consumer](https://en.wikipedia.org/wiki/Producer–consumer_problem) problem using a mutex and condition variables for synchronization in the C++ programming language. The condition variables enable condition-based synchronization, allowing threads to be suspended or notified for resumption of execution under specific conditions.

## The producer-consumer problem
The producer-consumer problem refers to a data area (a bounded buffer) shared by two types of processes: producers and consumers. Producers generate and insert new elements into the shared buffer, while consumers remove and consume elements from it. The following constraints must also be satisfied:

* Only one operation (insertion or removal of elements into/from the buffer) can be performed at a time
* Producers cannot insert new elements when the buffer is full: they must be suspended
* Consumers cannot remove elements when the buffer is empty: they must be suspended
* Elements must be removed in the same order in which they were inserted

This solution to the problem consists of implementing the insertion and removal operations as synchronized methods, thereby ensuring their execution under mutual exclusion. While the current size of the buffer equals the established capacity, producer threads should be suspended. If it is possible to add a new element to the buffer, then a consumer thread that has been suspended should be notified to resume execution. On the other hand, while the current size of the buffer is equal to zero, consumer threads should be suspended. If it is possible to remove an element from the buffer, then a producer thread that has been suspended should be notified to resume execution.

## Repository structure
The source code in this repository is organized as follows:

```
+─cpp-producerconsumer      ---> Project directory
  ├─── bin                  ---> Directory where executables are generated
  ├─── build                ---> Directory where object files resulting from the compilation are generated
  ├─── Doxyfile             ---> Configuration file for generating documentation with Oxygen
  ├─── doc                  ---> Directory where HTML documentation will be generated
  └─── include              ---> Directory with header files
       └─── buffer.h        ---> Definition of the shared buffer
       └─── consumer.h      ---> Definition of the consumer thread
       └─── producer.h      ---> Definition of the producer thread
  └─── src                  ---> Directory with source code files
       └─── buffer.cpp      ---> Implementation of the shared buffer and the synchronized operations on it
       └─── consumer.cpp    ---> Implementation of the consumer thread
       └─── producer.cpp    ---> Implementation of the producer thread
  └─── CMakeLists.txt       ---> Configuration file for CMake
  └─── main.cpp             ---> Main program
    
```

## Requirements

For compiling and executing programs, the following elements must be properly installed in the development environment:

- [Git](https://git-scm.com), as control version system
- [*GNU Compiler Collection*](https://gcc.gnu.org) (which includes the `gcc` and `g++` compilers), [`clang`](https://clang.llvm.org/) or any other compiler for the C and C++ programming languages
- [*GNU Make*](https://www.gnu.org/software/make/), for compiling via makefile
- [Doxygen](https://www.doxygen.nl), for automatic documentation generation

## Download, compilation, and execution

In the operating system’s terminal, insert the following commands to download the implementation from this Git repository and navigate to the resulting directory:

```bash
 # Download from the Git repository
 git clone https://github.com/ufrn-concprog/cpp-producerconsumer
 
 # Navigation to the directory
 cd cpp-producerconsumer
```

Next, you need to use CMake to generate the makefile and all related files required for building the program into the `build` directory. Insert the following command in the operating system's terminal:

```bash
 cmake build
```

To compile the program using the makefile generated by CMake inside the `build` directory, insert the following commands in the operating system's terminal:

```bash
 make -C build
```

Finally, insert the following command in the operating system's terminal to run the program:

```bash
./bin/producerconsumer
